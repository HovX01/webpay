# Repository Guidelines

## Project Structure & Module Organization
- `src/`: Library source code (current entry: `src/index.ts`).
- `dist/`: Build output generated by `tsup` (do not edit manually).
- `test/`: Node/Vitest unit and smoke tests (`*.test.ts`).
- `bun/`: Bun-specific smoke tests.
- `deno/`: Deno-specific tests (`*_test.ts`) and `deno.json` tasks.
- `e2e/`: Playwright end-to-end tests and browser fixtures (`e2e/fixtures/`).
- `scripts/`: Local tooling scripts (for example, `scripts/e2e-server.mjs`).
- Root configs: `tsconfig.json`, `tsup.config.ts`, `vitest.config.ts`, `playwright.config.ts`.

## Build, Test, and Development Commands
- `npm install`: Install dependencies.
- `npm run build`: Build ESM/CJS bundles and type declarations into `dist/`.
- `npm run dev`: Watch-mode build with `tsup`.
- `npm run typecheck`: Run TypeScript static checks with no emit.
- `npm test`: Run Node tests via Vitest.
- `npm run test:bun`: Run Bun smoke tests.
- `npm run test:deno`: Run Deno tests (requires Deno installed).
- `npm run test:e2e`: Run Playwright browser E2E tests.
- `npx playwright install chromium`: Install browser binary needed for E2E.

## Coding Style & Naming Conventions
- Language: TypeScript (strict mode), ESM-first.
- Indentation: 2 spaces; keep semicolons and double quotes consistent with existing files.
- File naming:
  - Unit tests: `*.test.ts`
  - Deno tests: `*_test.ts`
  - Config/scripts: lowercase with clear purpose (for example, `e2e-server.mjs`).
- Keep runtime-neutral logic in `src/`; isolate runtime-specific behavior in dedicated folders when added.

## Testing Guidelines
- Frameworks: Vitest (Node), Bun test runner, Deno test runner, Playwright (E2E).
- Add/adjust tests with every behavior change.
- Prefer smoke + behavior assertions over implementation details.
- Before opening a PR, run: `npm run typecheck && npm test && npm run test:e2e`.

## Commit & Pull Request Guidelines
- No Git history is available in this workspace yet; use Conventional Commits (e.g., `feat:`, `fix:`, `test:`).
- Keep commits focused and atomic.
- PRs should include:
  - What changed and why
  - Test evidence (commands + results)
  - Any runtime impact (Node/Bun/Deno/E2E)
  - Screenshots or trace notes for UI/E2E-related changes when relevant
